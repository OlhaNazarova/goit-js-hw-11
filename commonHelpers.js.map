{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst refs = {\n  form: document.querySelector('.form'),\n  textInput: document.querySelector('#query'),\n  searchBtn: document.querySelector('.search-button'),\n  galleryList: document.querySelector('.gallery-list'),\n  loader: document.querySelector('.loader'),\n};\n\nconst simplelightboxOptions = {\n  captions: true,\n  captionDelay: 250,\n  captionSelector: 'img',\n  captionType: 'attr',\n  captionsData: 'alt',\n  captionPosition: 'bottom',\n  captionClass: '',\n  captionHTML: true,\n};\n\nrefs.form.addEventListener('submit', onSearch);\n\nfunction onSearch(e) {\n  e.preventDefault();\n\n  loaderShow();\n\n  const searchText = e.currentTarget.elements.query.value;\n\n  const searchParams = new URLSearchParams({\n    key: '42031589-0742425241f8784341d5a922f',\n    q: searchText,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n  });\n\n  fetchPhotos(searchParams)\n    .then(data => {\n      createGallery(data);\n    })\n    .catch(error => {\n      console.log(error);\n    })\n    .finally(() => {\n      refs.form.reset();\n    });\n}\n\nfunction renderGalleryMarkup(photoList) {\n  \n  return photoList\n    .map(photo => {\n      return `\n      <li class=\"gallery-item\">\n        <a class=\"gallery-link\" href=\"${photo.largeImageURL}\">\n          <img\n            class=\"gallery-image\"\n            src=\"${photo.webformatURL}\"\n            data-source=\"${photo.largeImageURL}\"\n            alt=\"${photo.tags}\"\n          />\n        </a>\n      </li>\n      `;\n    })\n    .join('\\n');\n}\n\nfunction loaderHide() {\n  refs.loader.classList.add('is-hidden');\n}\n\nfunction loaderShow() {\n  refs.loader.classList.remove('is-hidden');\n}\n\nfunction createGallery(data) {\n  \n  if (data.total === 0) {\n    iziToast.error({\n      message: `Sorry, there are no images matching your search query. Please try again!`,\n      position: 'topRight',\n    });\n\n    refs.galleryList.innerHTML = '';\n    loaderHide();\n    return;\n  }\n\n  refs.galleryList.innerHTML = renderGalleryMarkup(data.hits);\n\n  loaderHide();\n\n  const gallery = new SimpleLightbox('.gallery-list a', simplelightboxOptions);\n  gallery.refresh();\n}\n\nfunction fetchPhotos(searchParams) {\n  return fetch(`https://pixabay.com/api/?${searchParams}`).then(response => {\n    if (!response.ok) {\n      throw new Error(response.status);\n    }\n    return response.json();\n  });\n}\n"],"names":["refs","simplelightboxOptions","onSearch","e","loaderShow","searchText","searchParams","fetchPhotos","data","createGallery","error","renderGalleryMarkup","photoList","photo","loaderHide","iziToast","SimpleLightbox","response"],"mappings":"6vBAKA,MAAMA,EAAO,CACX,KAAM,SAAS,cAAc,OAAO,EACpC,UAAW,SAAS,cAAc,QAAQ,EAC1C,UAAW,SAAS,cAAc,gBAAgB,EAClD,YAAa,SAAS,cAAc,eAAe,EACnD,OAAQ,SAAS,cAAc,SAAS,CAC1C,EAEMC,EAAwB,CAC5B,SAAU,GACV,aAAc,IACd,gBAAiB,MACjB,YAAa,OACb,aAAc,MACd,gBAAiB,SACjB,aAAc,GACd,YAAa,EACf,EAEAD,EAAK,KAAK,iBAAiB,SAAUE,CAAQ,EAE7C,SAASA,EAASC,EAAG,CACnBA,EAAE,eAAc,EAEhBC,IAEA,MAAMC,EAAaF,EAAE,cAAc,SAAS,MAAM,MAE5CG,EAAe,IAAI,gBAAgB,CACvC,IAAK,qCACL,EAAGD,EACH,WAAY,QACZ,YAAa,aACb,WAAY,EAChB,CAAG,EAEDE,EAAYD,CAAY,EACrB,KAAKE,GAAQ,CACZC,EAAcD,CAAI,CACxB,CAAK,EACA,MAAME,GAAS,CACd,QAAQ,IAAIA,CAAK,CACvB,CAAK,EACA,QAAQ,IAAM,CACbV,EAAK,KAAK,OAChB,CAAK,CACL,CAEA,SAASW,EAAoBC,EAAW,CAEtC,OAAOA,EACJ,IAAIC,GACI;AAAA;AAAA,wCAE2BA,EAAM,aAAa;AAAA;AAAA;AAAA,mBAGxCA,EAAM,YAAY;AAAA,2BACVA,EAAM,aAAa;AAAA,mBAC3BA,EAAM,IAAI;AAAA;AAAA;AAAA;AAAA,OAKxB,EACA,KAAK;AAAA,CAAI,CACd,CAEA,SAASC,GAAa,CACpBd,EAAK,OAAO,UAAU,IAAI,WAAW,CACvC,CAEA,SAASI,GAAa,CACpBJ,EAAK,OAAO,UAAU,OAAO,WAAW,CAC1C,CAEA,SAASS,EAAcD,EAAM,CAE3B,GAAIA,EAAK,QAAU,EAAG,CACpBO,EAAS,MAAM,CACb,QAAS,2EACT,SAAU,UAChB,CAAK,EAEDf,EAAK,YAAY,UAAY,GAC7Bc,IACA,MACD,CAEDd,EAAK,YAAY,UAAYW,EAAoBH,EAAK,IAAI,EAE1DM,IAEgB,IAAIE,EAAe,kBAAmBf,CAAqB,EACnE,QAAO,CACjB,CAEA,SAASM,EAAYD,EAAc,CACjC,OAAO,MAAM,4BAA4BA,CAAY,EAAE,EAAE,KAAKW,GAAY,CACxE,GAAI,CAACA,EAAS,GACZ,MAAM,IAAI,MAAMA,EAAS,MAAM,EAEjC,OAAOA,EAAS,MACpB,CAAG,CACH"}